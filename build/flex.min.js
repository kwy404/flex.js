/*! flex 2023-04-03 */
class Flex{constructor({el:t="html",state:e={},methods:r={}}){this.parse=new parse_,this.el=t,this.state=new Proxy(e,{set:(t,e,r)=>(t[e]=r,this.update_elements(e),!0)}),this.elements=Array.from(document.querySelectorAll(this.el+" *")).filter(t=>t.childNodes.length&&/\S/.test(t.textContent)),this.start_app(),this.methods_({methods:r})}start_app(){this.elements.forEach((e,t)=>{var r;e.nodeType===Node.TEXT_NODE?(r=this.parse.text(e.textContent))&&r.forEach(t=>{t.key&&(e.textContent=e.textContent.replace(t.text,this.state[t.key]))}):Array.from(e.childNodes).forEach(e=>{var t;e.nodeType===Node.TEXT_NODE&&(t=this.parse.text(e.textContent))&&t.forEach(t=>{t.key&&(e.textContent=e.textContent.replace(t.text,this.state[t.key]))})})})}update_elements(r){this.elements.forEach(e=>{var t;e.nodeType===Node.TEXT_NODE?(t=this.parse.text(e.textContent))&&t.forEach(t=>{t.key===r&&(e.textContent=e.textContent.replace(t.text,this.state[r]))}):Array.from(e.childNodes).forEach(e=>{var t;e.nodeType===Node.TEXT_NODE&&(t=this.parse.text(e.textContent))&&t.forEach(t=>{t.key===r&&(e.textContent=e.textContent.replace(t.text,this.state[r]))})})})}methods_({methods:a}){var t=Array.from(document.querySelectorAll(this.el+" *"));const h=this;t.forEach(e=>{var r=e.attributes;for(let t=0;t<r.length;t++){var n=r[t].name,o=n.replace(":","");if(n&&":"===n[0]){const s=e.getAttribute(n);e.addEventListener(o,function(){"function"==typeof a[s]&&a[s].call(h)}),e.removeAttribute(n),e.cloneNode(!0)}}})}}function html_parse_(t){return document.querySelectorAll(t)[0].cloneNode(!0)}function parse_(){var o=/\{\{(.+?)\}\}/;return{text:function(t){if(!o.test(t))return null;for(var e,r,n=[];e=t.match(o);)0<(r=e.index)&&n.push(t.slice(0,r)),n.push({text:e[0],key:e[1].trim()}),t=t.slice(r+e[0].length);return t.length&&n.push(t),n}}}