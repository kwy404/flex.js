/*! flex 2023-04-03 */
class Flex{constructor({el:e="html",state:t={},methods:o={}}){this.parse=new parse_,this.el=e,this.state=new Proxy(t,{set:(e,t,o)=>(e[t]=o,this.update_elements(),!0)}),this.elClone=document.querySelector(this.el).cloneNode(!0),this.elements=Array.from(document.querySelectorAll(this.el+" *")).filter(e=>e.childNodes.length&&/\S/.test(e.textContent)),this.cloneNode=new html_parse_(this.el),this.start_app(),this.methods_({methods:o})}start_app(){this.elements.forEach((t,e)=>{var o;t.nodeType===Node.TEXT_NODE?(o=this.parse.text(t.textContent))&&o.forEach(e=>{e.key&&(t.textContent=t.textContent.replace(e.text,this.state[e.key]))}):Array.from(t.childNodes).forEach(t=>{var e;t.nodeType===Node.TEXT_NODE&&(e=this.parse.text(t.textContent))&&e.forEach(e=>{e.key&&(t.textContent=t.textContent.replace(e.text,this.state[e.key]))})})})}update_elements(){const t=document.querySelectorAll(this.el+" *");var e=this.elClone.cloneNode(!0);Array.from(e.querySelectorAll("*")).forEach((e,o)=>{const n=t[o];if(e.nodeType===Node.TEXT_NODE){o=this.parse.text(e.textContent);if(o){let t=e.textContent;o.forEach(e=>{e.key&&(t=t.replace(e.text,this.state[e.key]))}),n.textContent=t}}else Array.from(e.childNodes).forEach((e,o)=>{if(e.nodeType===Node.TEXT_NODE){var r=this.parse.text(e.textContent);if(r){let t=e.textContent;r.forEach(e=>{e.key&&(t=t.replace(e.text,this.state[e.key]))}),n.childNodes[o].textContent=t}}})})}methods_({methods:a}){const h=Array.from(document.querySelectorAll(this.el+" *"));var e=Array.from(document.querySelectorAll(this.el+" *"));const c=this;e.forEach((t,o)=>{var r=t.attributes;for(let e=0;e<r.length;e++){var n=r[e].name,s=n.replace(":","");if(n&&":"===n[0]){const l=t.getAttribute(n);h[o].addEventListener(s,function(){"function"==typeof a[l]&&a[l].call(c)}),t.removeAttribute(n),t.cloneNode(!0)}}})}}function html_parse_(e){return document.querySelectorAll(e)[0].cloneNode(!0)}function parse_(){var n=/\{\{(.+?)\}\}/;return{text:function(e){if(!n.test(e))return null;for(var t,o,r=[];t=e.match(n);)0<(o=t.index)&&r.push(e.slice(0,o)),r.push({text:t[0],key:t[1].trim()}),e=e.slice(o+t[0].length);return e.length&&r.push(e),r}}}