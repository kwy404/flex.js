/*!
 * flex 1.0.0
 * 
 *
 * Author: kaway
 * Licensed under ISC (https://opensource.org/licenses/ISC)
 *
 * Date: 2025-01-06
 */
const ATTR_EACH="*each";function eachLoop(e,r,n){if(n){var o=e.getAttribute(ATTR_EACH);if(o){const[i,t]=o.split(" in ");o=r[t];if(Array.isArray(o)){e.removeAttribute(ATTR_EACH);var s=e.parentElement;const a=e.cloneNode(!0),c=(e.innerHTML="",document.createElement(s.tagName).cloneNode(!0));o.forEach(t=>{var r=a.cloneNode(!0);if("object"==typeof t){let e=r.innerHTML;for(const n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp(`\\[\\s*${i}\\.${n}\\s*\\]`,"g"),t[n]));r.innerHTML=e}else r.innerHTML=r.innerHTML.replace(new RegExp(`\\[\\s*${i}\\s*\\]`,"g"),t);c.appendChild(r)});s=parseText().text(c.innerHTML);let t=c.innerHTML;s&&s.forEach(e=>{e.key&&(t=t.replaceAll(e.text,r[e.key]))}),n.innerHTML=t,e.innerHTML!==n.innerHTML&&(n.innerHTML=t)}}}}const ATTR_IF="*if";function parseIf(e){return e}function ifCondition(element,state,targetElement){if(targetElement){const ifAttr=element.getAttribute(ATTR_IF);if(ifAttr){const condition=parseIf(ifAttr),shouldShow=eval(condition);shouldShow&&(console.log(shouldShow),element.innerHTML!==targetElement.innerHTML)&&(targetElement.style.display="")}Array.from(element.children).forEach(e=>this.ifCondition(e,state)),JSON.stringify(state)!==JSON.stringify(this.state)&&(this.state=this.createStateProxy(state))}}const FlexInstance=function(){let s;return{create:function(e){{var[{root:t="html",state:r={},methods:n={}}]=[e];class o{constructor(){this.eachLoop=eachLoop,this.ifCondition=ifCondition,this.parseText=parseText(),this.root=t,this.state=this.createStateProxy(r),this.prevState={},this.rootements=Array.from(document.querySelectorAll(this.root+" *")).filter(e=>e.childNodes.length&&""!==e.textContent.trim()),this.cloneNode=parseHTML(this.root),this.startApp(),this.methods=n,this.setupMethods({methods:n})}createStateProxy(e){const n=e=>{if(Array.isArray(e))return new Proxy(e,{set:(e,t,r)=>(e[t]=r,this.updateElements(),!0),defineProperty:(e,t,r)=>{e=Reflect.defineProperty(e,t,r);return"length"===t&&this.updateElements(),e},deleteProperty:(e,t)=>{e=Reflect.deleteProperty(e,t);return this.updateElements(),e}});if("object"!=typeof e||null===e)return e;var t={};for(const r in e)t[r]=n(e[r]);return new Proxy(t,{set:(e,t,r)=>(e[t]=r,this.updateElements(),!0),deleteProperty:(e,t)=>{e=Reflect.deleteProperty(e,t);return this.updateElements(),e}})};return n(e)}startApp(){this.rootements.forEach((t,e)=>{var r;t.nodeType===Node.TEXT_NODE?(r=this.parseText.text(t.textContent))&&r.forEach(e=>{e.key&&(t.textContent=t.textContent.replace(e.text,this.state[e.key]))}):Array.from(t.childNodes).forEach(t=>{var e;t.nodeType===Node.TEXT_NODE&&(e=this.parseText.text(t.textContent))&&e.forEach(e=>{e.key&&(t.textContent=t.textContent.replace(e.text,this.state[e.key]))})})}),this.rootements.forEach((e,t)=>{this.eachLoop(e,this.state,this.rootements[t]),this.ifCondition(e,this.state,this.rootements[t])})}updateElements(){if(this.state!==this.prevState){const t=document.querySelectorAll(this.root+" *");var e=this.cloneNode.cloneNode(!0);Array.from(e.querySelectorAll("*")).forEach((e,r)=>{const o=t[r];if(o&&this.eachLoop(e,this.state,o),e.nodeType===Node.TEXT_NODE){r=this.parseText.text(e.textContent);if(r){let t=e.textContent;r.forEach(e=>{e.key&&(t=t.replace(e.text,this.state[e.key]))}),o.textContent=t}}else Array.from(e.childNodes).forEach((e,r)=>{if(e.nodeType===Node.TEXT_NODE){var n=this.parseText.text(e.textContent);if(n){let t=e.textContent;n.forEach(e=>{e.key&&(t=t.replace(e.text,this.state[e.key]))}),o.childNodes[r].textContent=t}}})})}}setupMethods({methods:a={}}){var e=this.cloneNode.cloneNode(!0);const c=document.querySelectorAll(this.root+" *"),l=this;Array.from(e.querySelectorAll(this.root+" *")).forEach((t,r)=>{var n=t.attributes;for(let e=0;e<n.length;e++){var o=n[e].name,s=o.replace("@","");if(o&&"@"===o[0]){const i=t.getAttribute(o);c[r].addEventListener(s,function(){"function"==typeof a[i]&&a[i].call(l)}),t.removeAttribute(o),t.cloneNode(!0)}}})}}return{getInstance:function(){return s||(flex.console.warn("InstÃ¢ncia do Flex foi criada com sucesso.",{debug:!1}),s=new o),s}}}}}}();let flex={};function parseText(){const o=/\{(.+?)\}/;return{text:function(e){if(!o.test(e))return null;for(var t,r,n=[];t=e.match(o);)0<(r=t.index)&&n.push(e.slice(0,r)),n.push({text:t[0],key:t[1].trim()}),e=e.slice(r+t[0].length);return e.length&&n.push(e),n}}}function parseHTML(e){return document.querySelector(e).cloneNode(!0)}flex.console={warn(e,{silent:t=!1,debug:r=!1}){t&&!r||(console.warn("[Flex warn]: "+e),r&&console.warn(new Error("Warning Stack Trace").stack))}};