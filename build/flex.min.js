/*!
 * flex 1.0.0
 * 
 *
 * Author: kaway
 * Licensed under ISC (https://opensource.org/licenses/ISC)
 *
 * Date: 2025-01-06
 */
const ATTR_EACH="*each";function eachLoop(e,r,o,n){if(o){var s=e.getAttribute("each");if(s){const[a,t]=s.split(" in ");s=r[t];if(Array.isArray(s)){e.removeAttribute("each");var i=e.parentElement;const c=e.cloneNode(!0),l=(e.innerHTML="",document.createElement(i.tagName).cloneNode(!0));s.forEach(e=>{var t=c.cloneNode(!0);t.innerHTML=replacePlaceholders(t.innerHTML,e,a),l.appendChild(t),setupMethodsForEach(t,e,a,r,n)});i=parseText().text(l.innerHTML);let t=l.innerHTML;i&&i.forEach(e=>{e.key&&(t=t.replaceAll(e.text,r[e.key]))}),o.innerHTML=t,e.innerHTML!==o.innerHTML&&(o.innerHTML=t)}}}}function setupMethodsForEach(e,a,t,c,l){e=e.querySelectorAll("*");Array.from(e).forEach(t=>{var r=t.attributes;for(let e=0;e<r.length;e++){var o=r[e].name,n=o.replace("@","");if(o&&"@"===o[0]){const[s,...i]=t.getAttribute(o).replace(/[()]/g,"").split(",").map(e=>e.trim());t.addEventListener(n,function(t){var e;"function"==typeof l.methods[s]&&(e=i.map(e=>/^\d+$/.test(e)?Number(e):"'"===e[0]&&"'"===e[e.length-1]?e.slice(1,-1):"$event"===e?t:e.startsWith("[")&&e.endsWith("]")?(e=e.slice(1,-1).trim()).split(".").reduce((e,t)=>e&&e[t],a):e.includes(".")?e.split(".").reduce((e,t)=>e[t],c):c[e]),l.methods[s].apply(l,e))}),t.removeAttribute(o)}}})}function replacePlaceholders(e,t,r){if("object"==typeof t&&null!==t)for(const n in t){var o;t.hasOwnProperty(n)&&(e="object"==typeof(o=t[n])?replacePlaceholders(e,o,r+"."+n):e.replace(new RegExp(`\\[\\s*${r}\\.${n}\\s*\\]`,"g"),o))}else e=e.replace(new RegExp(`\\[\\s*${r}\\s*\\]`,"g"),t);return e}const ATTR_IF="*if";function parseIf(t,e){try{return new Function("state",`with(state) { return ${t}; }`)(e)}catch(e){return console.error("Error evaluating condition: "+t,e),!1}}function ifCondition(e,t,r){var o;r&&((o=e.getAttribute(ATTR_IF))&&(o=parseIf(o,t),r.style.display=o?"block":"none"),Array.from(e.children).forEach(e=>this.ifCondition(e,t,r.querySelector(e.tagName))),JSON.stringify(t)!==JSON.stringify(this.state))&&(this.state=this.createStateProxy(t))}const FlexInstance=function(){let s;return{create:function(e){{var[{root:t="html",state:r={},methods:o={}}]=[e];class n{constructor(){this.eachLoop=eachLoop,this.ifCondition=ifCondition,this.parseText=parseText(),this.root=t,this.state=this.createStateProxy(r),this.prevState={},this.rootElements=Array.from(document.querySelectorAll(this.root+" *")).filter(e=>e.childNodes.length&&""!==e.textContent.trim()),this.cloneNode=parseHTML(this.root),this.startApp(),this.methods=o,this.setupMethods({methods:o})}createStateProxy(e){const o=e=>{if(Array.isArray(e))return new Proxy(e,{set:(e,t,r)=>(e[t]=r,this.updateElements(),!0),defineProperty:(e,t,r)=>{e=Reflect.defineProperty(e,t,r);return"length"===t&&this.updateElements(),e},deleteProperty:(e,t)=>{e=Reflect.deleteProperty(e,t);return this.updateElements(),e}});if("object"!=typeof e||null===e)return e;var t={};for(const r in e)t[r]=o(e[r]);return new Proxy(t,{set:(e,t,r)=>(e[t]=r,this.updateElements(),!0),deleteProperty:(e,t)=>{e=Reflect.deleteProperty(e,t);return this.updateElements(),e}})};return o(e)}startApp(){this.rootElements.forEach((t,e)=>{var r;t.nodeType===Node.TEXT_NODE?(r=this.parseText.text(t.textContent))&&r.forEach(e=>{e.key&&(t.textContent=t.textContent.replace(e.text,this.state[e.key]))}):Array.from(t.childNodes).forEach(t=>{var e;t.nodeType===Node.TEXT_NODE&&(e=this.parseText.text(t.textContent))&&e.forEach(e=>{e.key&&(t.textContent=t.textContent.replace(e.text,this.state[e.key]))})})}),this.rootElements.forEach((e,t)=>{this.eachLoop(e,this.state,this.rootElements[t],this),this.ifCondition(e,this.state,this.rootElements[t])})}updateElements(){if(this.state!==this.prevState){const t=document.querySelectorAll(this.root+" *");var e=this.cloneNode.cloneNode(!0);Array.from(e.querySelectorAll("*")).forEach((e,r)=>{const n=t[r];if(n&&this.eachLoop(e,this.state,n,this),e.nodeType===Node.TEXT_NODE){r=this.parseText.text(e.textContent);if(r){let t=e.textContent;r.forEach(e=>{e.key&&(t=t.replace(e.text,this.state[e.key]))}),n.textContent=t}}else Array.from(e.childNodes).forEach((e,r)=>{if(e.nodeType===Node.TEXT_NODE){var o=this.parseText.text(e.textContent);if(o){let t=e.textContent;o.forEach(e=>{e.key&&(t=t.replace(e.text,this.state[e.key]))}),n.childNodes[r].textContent=t}}})})}}setupMethods({methods:c={}}){var e=this.cloneNode.cloneNode(!0);const l=document.querySelectorAll(this.root+" *"),h=this;Array.from(e.querySelectorAll(this.root+" *")).forEach((t,r)=>{var o=t.attributes;for(let e=0;e<o.length;e++){var n=o[e].name,s=n.replace("@","");if(n&&"@"===n[0]){const[i,...a]=t.getAttribute(n).replace(/[()]/g,"").split(",").map(e=>e.trim());l[r].addEventListener(s,function(t){var e;"function"==typeof c[i]&&(e=a.map(e=>/^\d+$/.test(e)?Number(e):"'"===e[0]&&"'"===e[e.length-1]?e.slice(1,-1):"$event"===e?t:e.startsWith("[")&&e.endsWith("]")?(e=e.slice(1,-1).trim()).split(".").reduce((e,t)=>e&&e[t],this):e.includes(".")?e.split(".").reduce((e,t)=>e[t],h.state):h.state[e]),c[i].apply(h,e))}),t.removeAttribute(n)}}})}}return{getInstance:function(){return s||(console.warn("Inst√¢ncia do Flex foi criada com sucesso.",{debug:!1}),s=new n),s}}}}}}();let flex={};function parseText(){const n=/\{(.+?)\}/;return{text:function(e){if(!n.test(e))return null;for(var t,r,o=[];t=e.match(n);)0<(r=t.index)&&o.push(e.slice(0,r)),o.push({text:t[0],key:t[1].trim()}),e=e.slice(r+t[0].length);return e.length&&o.push(e),o}}}function parseHTML(e){return document.querySelector(e).cloneNode(!0)}flex.console={warn(e,{silent:t=!1,debug:r=!1}){t&&!r||(console.warn("[Flex warn]: "+e),r&&console.warn(new Error("Warning Stack Trace").stack))}};